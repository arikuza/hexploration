# Hexploration - Космическая MMORPG

Браузерная космическая MMORPG с гексагональной картой, пошаговыми переходами и аркадной боевой системой в стиле Star Control.

## Технологии

### Клиент
- **React 18** + **TypeScript** - UI фреймворк
- **Redux Toolkit** - управление состоянием
- **Vite** - сборщик и dev-сервер
- **Canvas API** - рендеринг гексагональной карты
- **Socket.io-client** - WebSocket соединение в реальном времени

### Сервер
- **Node.js** + **TypeScript** + **Express**
- **Socket.io** - WebSocket сервер
- **JWT** - аутентификация
- In-memory хранилище (можно расширить на PostgreSQL/MongoDB)

### Shared модуль
- Общие типы TypeScript
- Утилиты для работы с гексагональной сеткой
- Константы игры

## Структура проекта

```
hexploration/
├── client/          # React клиент (порт 5173)
│   ├── src/
│   │   ├── components/    # React компоненты
│   │   ├── store/         # Redux Toolkit store
│   │   ├── services/      # API и Socket.io сервисы
│   │   └── pages/         # Страницы
│   └── package.json
├── server/          # Node.js сервер (порт 3001)
│   ├── src/
│   │   ├── game/          # Игровая логика
│   │   ├── routes/        # Express routes
│   │   └── socket/        # Socket.io обработчики
│   └── package.json
├── shared/          # Общие модули
│   └── src/
│       ├── types/         # TypeScript типы
│       ├── constants/     # Константы
│       └── utils/         # Утилиты
└── package.json     # Workspace конфигурация
```

## Установка и запуск

### 1. Установка зависимостей

```bash
npm install
```

Эта команда установит зависимости для всех workspace'ов (client, server, shared).

### 2. Сборка shared модуля

```bash
npm run build --workspace=shared
```

Shared модуль нужно собрать один раз, так как от него зависят клиент и сервер.

### 3. Запуск в режиме разработки

#### Вариант 1: Запустить все одной командой (рекомендуется)

```bash
npm run dev
```

Эта команда запустит:
- Сервер на `http://localhost:3050`
- Клиент на `http://localhost:5173`

#### Вариант 2: Запустить по отдельности

В первом терминале (сервер):
```bash
npm run dev:server
```

Во втором терминале (клиент):
```bash
npm run dev:client
```

### 4. Открыть в браузере

Откройте `http://localhost:5173` в браузере.

## Использование

### Регистрация и вход

1. При первом запуске создайте аккаунт (минимум 3 символа username, 6 символов пароль)
2. После регистрации вы автоматически войдете в игру

### Игровой процесс

1. **Гексагональная карта** - отображается в центре экрана
   - Различные типы секторов (пустые, астероиды, туманности, планеты, станции, червоточины)
   - Ваш корабль отмечен зеленым кружком
   - Другие игроки - оранжевыми кружками

2. **Пошаговая система**
   - В верхней части экрана показано, чей сейчас ход
   - Когда ваш ход - можете кликнуть на соседний гекс для перемещения
   - Максимум 3 гекса за один ход

3. **HUD (интерфейс)**
   - Здоровье и энергия корабля
   - Текущие ресурсы
   - Номер хода

4. **Список игроков**
   - Справа отображаются все онлайн игроки
   - Синий индикатор показывает, чей сейчас ход

## Игровые механики

### Гексагональная карта
- Система axial координат для гексов
- Различные типы космических секторов:
  - **Empty** - пустое пространство
  - **Asteroid** - астероидное поле (содержит ресурсы)
  - **Nebula** - туманность
  - **Planet** - планета
  - **Station** - космическая станция
  - **Wormhole** - червоточина
- Радиус карты: 10 гексов от центра

### Пошаговая система
- Очередь ходов между игроками
- Максимум 3 гекса за один ход
- Автоматическая смена хода после перемещения

### Корабли
Типы кораблей (базовая реализация):
- **Scout** - быстрый разведчик
- **Fighter** - сбалансированный истребитель
- **Cruiser** - тяжелый крейсер
- **Support** - корабль поддержки

### Боевая система (в разработке)
- Аркадные бои в стиле Star Control
- Физика движения кораблей
- Различные типы оружия (лазеры, плазма, ракеты, лучи)

## Конфигурация

### Переменные окружения

**Сервер** (`server/.env`):
```env
PORT=3050
NODE_ENV=development
JWT_SECRET=your-secret-key
CLIENT_URL=http://localhost:5173
```

**Клиент** (`client/.env`):
```env
VITE_API_URL=http://localhost:3050/api
VITE_SERVER_URL=http://localhost:3050
```

## Разработка

### Сборка для production

```bash
npm run build
```

### Запуск production сборки

```bash
# Сервер
npm run start --workspace=server

# Клиент (через preview)
npm run preview --workspace=client
```

## Архитектура

### Redux Toolkit Store
- `authSlice` - аутентификация
- `gameSlice` - состояние игры
- `playerSlice` - игроки
- `combatSlice` - боевая система
- `socketMiddleware` - интеграция Socket.io с Redux

### Socket.io события
- `connect` / `disconnect` - подключение
- `auth:success` - успешная аутентификация
- `game:state` - полное состояние игры
- `game:update` - обновление состояния
- `move` - перемещение игрока
- `player:join` / `player:leave` - вход/выход игроков
- `combat:*` - боевые события

## Будущие улучшения

- [ ] Полная реализация боевой системы
- [ ] Система ресурсов и крафта
- [ ] Прокачка кораблей
- [ ] Чат между игроками
- [ ] Сохранение состояния в БД (PostgreSQL/MongoDB)
- [ ] Множественные игровые комнаты
- [ ] Система квестов
- [ ] Торговля между игроками
- [ ] Кланы и альянсы

## Лицензия

MIT
